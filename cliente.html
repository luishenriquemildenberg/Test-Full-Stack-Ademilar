<!doctype html>
<html lang="en">
  <head>
    <!-- meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

    <title>Clientes</title>	
  </head>
  <body> 
    <div class="container">
		<br/>
        <h1>Cadastro de Cliente</h1>
        <div class="cssformulario">
		
		<form method="POST" action="insert.php">
			<div class="mb-3">
				<label for="validationDefault01">Nome</label>
				<input type="text" class="form-control" name="nome" id="validationDefault01" required>
				<label for="validationDefaultUsername">E-mail</label>
				<div class="input-group">
					<input type="text" class="form-control" name="email" id="validationDefaultUsername" aria-describedby="inputGroupPrepend2" required>
				</div>
			</div>
			<div class="mb-3">
				<label for="validationSenha">Senha</label>
				<input type="password" class="form-control" name="pass" id="senha01">
			</div>
			<div class="form-group">
				<button class="btn btn-primary" type="submit">Confirmar</button>
			</div>
			<br/><br/>
			
			<table class="table">
				<thead>
					<tr>
						<h2>Nossos Clientes</h2>
						<th>Nome</th>
						<th>E-mail</th>
					</tr>					
				</thead>
				<!-- <script>
					function confirmacao(id) {
			
						var resposta = confirm("Deseja remover esse registro?");
			
						if (resposta == true) {
							window.location.href = "delete.php?id=" + id;
						} else {
							window.location.href = "select.php";
						}
					}
				</script> -->
				
				<tbody id="clientes">
				
				</tbody>
				
			</table>
			
        </div>
        
<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script type="text/javascript">
	 

	listClientes = () => {
         
		$.ajax({
			method:'GET'
			, url: '/Test-Full-Stack-Ademilar/api/cliente.php'
			, dataType: 'JSON'
		}).done((dados) => {
			
			$('#clientes').html('')
			$.each(dados.clientes,(a,v) => {
				$('#clientes').append('<tr><td>' + v.nome + '</td><td><small>' + v.email + '</small></td></tr>')
			})
			
		})
		
	
	}
    listClientes();
	
</script>

    </body>
</html>